<html> 
    <head> 
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
        <title>Particle system</title> 
        <script type="text/javascript" src="../javascript/kernel/Settings.js"></script>
        <script type="text/javascript" src="../javascript/kernel/Time.js"></script>
        <script type="text/javascript" src="../javascript/kernel/Input.js"></script>
        <script type="text/javascript" src="../javascript/kernel/Application.js"></script>
        <script type="text/javascript" src="../javascript/kernel/Utils.js"></script>
        <script type="text/javascript" src="../javascript/kernel/Script.js"></script>
        <script type="text/javascript" src="../javascript/kernel/GameObject.js"></script>
        <script type="text/javascript" src="../javascript/components/ParticleSystem.js"></script>

        <script type="text/javascript">
            /**
             * Particles test screen level.
             * 
             * 
             * @author Thiago Campos Viana
             */
            ParticleTest.prototype = new GameObject;
            function ParticleTest() {
                this.name="Particle";
		
                this.start=function(){		
                    //this.x=100;
                    this.ps = new ParticleSystem();
                    this.insertScript(this.ps);
                    this.ps.init(1000, 150, 150, 30, 30);
                    this.ps.setParticlesColor("#ff0000");
                    this.ps.setParticlesValues( -100, 100, -150, 150, 1, 5);
                    this.ps.oneShot=false;		
                },
	


                this.onKeyDown=function() {	

                    if(Input.isKeyDown_left){
                        this.ps.setPos(150, 150, 30, 30);
                        this.ps.setParticlesValues( -200, 200, -100, 100, 1, 10);
                    }
                    if(Input.isKeyDown_right){
                        this.ps.setPos(0, 0, 10, 10);
                        this.ps.setParticlesValues( 200, 500, 100, 100, 1, 5);
                    }
                    if(Input.isKeyDown_down){
                        this.ps.setPos(0, 0, 400, 400);
                        this.ps.setParticlesValues( 0, 0, 100, 100, 1, 5);
                    }
		
                    if(Input.isKeyDown_space){
                        this.ps.setPos(300, 300, 20, 20);
                        this.ps.setParticlesValues( -100, 100, -100, -200, 1, 2);
                    }
		
                    if(Input.isKeyDown_up){
                        this.ps.oneShot=this.ps.oneShot==true?false:true;
                    }

                }
                /*
    this.onMouseUp=function(e) {console.log('mouse up')};
    
    this.onMouseDown=function(e) {console.log('mouse down')};
                 */

            }







        </script>
    </head> 
    <body id="home"> 
        <canvas id="canvas" width="600" height="400"></canvas>
        <p>left,down,right = change animation</p>
        <p>down = toggle onShot on/off</p>
        <script type="text/javascript">
            Application.run('canvas','ParticleTest');			
        </script>	
    </body> 
</html>  			